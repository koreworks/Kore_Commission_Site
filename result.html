<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>커미션 결과</title>
</head>
<body>
  <h1>맞춤 안내 결과</h1>
  <p>선택하신 조건을 기준으로 안내가 정리되었습니다.</p>
  <hr />

  <div id="summary"></div>
  <hr />

  <div id="content"></div>
  <hr />

  <div id="samples"></div>
  <hr />

  <div id="apply"></div>

  <br />
  <button onclick="location.href='guide.html'">← 질문으로 돌아가기</button>
  <button id="resetBtn">처음부터</button>

  <script>
    const LS_ANS = "Kore_Commission_answers";
    const LS_STEP = "Kore_Commission_step";
    const LS_HIS = "Kore_Commission_history";

    function loadAnswers() {
      const raw = localStorage.getItem(LS_ANS);
      return raw ? JSON.parse(raw) : null;
    }

    function resetAll() {
      localStorage.removeItem(LS_ANS);
      localStorage.removeItem(LS_STEP);
      localStorage.removeItem(LS_HIS);
      location.href = "index.html";
    }

    document.getElementById("resetBtn").onclick = resetAll;

    const answers = loadAnswers();
    if (!answers || !answers.pay || !answers.usage || !answers.comm || !answers.portfolio || !answers.viewMode) {
      // 답이 없으면 가이드로 돌려보냄
      location.href = "guide.html";
    }

    // ====== 1) 선택 요약 카드 ======
    const summary = document.getElementById("summary");
    summary.innerHTML = `
      <h2>선택 요약</h2>
      <ul>
        <li><b>페이 타입</b>: ${answers.pay}</li>
        <li><b>사용 용도</b>: ${answers.usage}</li>
        <li><b>커뮤니케이션</b>: ${answers.comm}</li>
        <li><b>포트폴리오 사용</b>: ${answers.portfolio}</li>
        <li><b>안내 방식</b>: ${answers.viewMode}</li>
      </ul>
    `;

    // ====== 2) 공통 규칙 안내(사이트 최종 규칙 반영) ======
    const commonRules = `
      <h2>공통 안내</h2>
      <h3>수정 관련 규칙</h3>
      <p>
        미세 조정에 대한 수정 요청은 언제나 환영합니다.<br />
        단, <b>작업 중간 단계에서 작업 방향 자체를 변경하는 요청은 페이 타입과 관계없이 허가되지 않습니다.</b>
      </p>

      <h3>결과물 전달 기준</h3>
      <ul>
        <li>화음가이드: <b>WAV 1종</b></li>
        <li>믹싱: <b>WAV 1종</b></li>
        <li>일러스트: <b>투명 PNG 1장</b></li>
      </ul>
      <p>※ 프로젝트 파일(DAW 파일, PSD 등)은 제공되지 않습니다.</p>

      <h3>AI 사용 안내</h3>
      <p>
        본 커미션의 화음가이드와 해당 사이트는 <b>AI를 사용하여 제작</b>됩니다.<br />
        (화음가이드는 AI 보컬 신디사이저 사용, 사이트는 챗GPT 사용)
        이외의 작업에서는 일체 AI를 사용하지 않습니다.
        해당 방식에 동의하시는 경우에만 신청해주세요.
      </p>

      <h3>일정 조정 추가금(최종 규칙)</h3>
      <ul>
        <li><b>소페이</b>: 당일 마감 불가 / 기본 마감일에서 하루 앞당기면 <b>최종 금액의 +5%</b></li>
        <li><b>유페이</b>: 당일 마감 가능 / 기본 마감일에서 하루 앞당기면 <b>최종 금액의 +5%</b></li>
      </ul>
      <p>※ 일정 단축은 작업 가능 여부에 따라 제한될 수 있습니다.</p>

      <h3>상업용 배율</h3>
      <p>
        상업용 기준은 <b>수익 창출 여부</b>입니다. (수익 창출이 없는 커버곡 영상 → 상업용 아님)<br />
        무페이는 상업용 선택이 불가합니다.<br />
        상업용일 경우: 화음가이드 ×2 / 믹싱 ×3 / 일러스트 ×3
      </p>

      <h3>포트폴리오 비공개 추가금</h3>
      <p>포트폴리오 사용이 불가능할 경우 <b>최종 금액의 +10%</b>가 추가됩니다.</p>
    `;

    // ====== 3) 안내 방식(Q5)에 따라 보여줄 본문 구성 ======
    const content = document.getElementById("content");

    // (A) "요약만 보기"에 들어갈 요약문(짧게)
    function getSummaryText(pay) {
      if (pay === "무페이") {
        return `
          <h2>요약 안내</h2>
          <p>
            무페이는 경험·연습 목적의 커미션이며 일정 단축이 불가능합니다.
            일러스트는 무페이로 진행하지 않습니다.
          </p>
          <p><b>화음가이드</b>: 원곡 화음 따기만 가능 / 기본 2주</p>
          <p><b>믹싱</b>: 기본 3주 / 세밀한 박자조정 및 EQ 작업 없음</p>
        `;
      }
      if (pay === "소페이") {
        return `
          <h2>요약 안내</h2>
          <p>소페이는 저렴한 가격으로 가볍게 신청할 수 있는 커미션입니다.</p>
          <p><b>화음가이드</b>: 3~5일 / 원곡·창작 가능</p>
          <p><b>믹싱</b>: 기본 5~7일 / 음정·박자 보정 진행</p>
          <p><b>일러스트</b>: 기본 7~14일 / 소페이는 세밀한 묘사 제한</p>
        `;
      }
      // 유페이
      return `
        <h2>요약 안내</h2>
        <p>유페이는 완성도와 일정 안정성을 우선으로 하는 커미션입니다.</p>
        <p><b>화음가이드</b>: 기본 1~3일 / 원곡·창작 가능(오마카세 추가금 없음)</p>
        <p><b>믹싱</b>: 기본 3~5일 / EQ 포함(청감 위주)</p>
        <p><b>일러스트</b>: 기본 5~7일 / 묘사·표현 밀도 상승</p>
      `;
    }

    // (B) "자세한 안내 + 실력본 보기"에 들어갈 전문 텍스트(네가 준 줄글 기반)
    //    ※ 여기는 길어도 괜찮음. 나중에 필요하면 섹션 접기(아코디언)도 가능.
    const FULL_GUIDE = {
      "무페이": `
        <h2>무페이 실력본 안내(전문)</h2>

        <h3>화음가이드 (원곡 화음 따기)</h3>
        <p>
          1. 노래를 들으면서 가사지에 화음이 들어가는 위치와 개수를 간략히 기록합니다.
          2. Vox Factory라는 AI 보컬 신디사이저를 사용하여 MIDI를 찍으며 먼저 화음이 위치한 멜로디를 체크합니다.
          (코러스 파트는 메인과 구분하여 별도로 MIDI 제작)
          3. 노래를 다시 들으면서 음을 직접 들으며 높낮이를 변경해서 화음을 제작합니다.
          4. WAV 파일로 출력 후 제출

          장점 : AI 보컬로 작업하기 때문에 음과 박자가 정확하고 듣기에 깔끔합니다.
          단점 : AI 보컬이라 발음이 어눌한 부분이 있고, 프로그램 기술력의 한계로 원곡과 유사한 기교를 구사하기 어렵습니다.
          (이 부분은 프로그램 업데이트에 따라 개선될 여지 있음)
        </p>

        <h3>믹싱</h3>
        <p>
          0. Cakewalk Sonar을 이용하여 작업
          1. 원곡의 오디오 파형과 보컬의 오디오 파형을 체크하며 위치를 조정하여 먼저 박자를 맞춥니다.
          2. 음정 보정
          - 본 커미션의 음정 보정에는 두 가지 방향이 있는데, 첫 번째는 graillon2라는 오토튠 계열 플러그인이고 두 번째는 멜로다인입니다.
          graillon2를 사용하면 약간의 오차가 있을 수 있고 기계음이 필연적으로 들릴 가능성이 있습니다.
          멜로다인을 사용하면 두 개의 발음이 하나의 음으로 묶여 있는 사례를 제외하고는 거의 완벽하게 음정 보정이 가능합니다.
          3. 오디오 이펙트 사용 (무페이는 세밀한 박자 조정을 하지 않습니다.)
          4. WAV 파일로 렌더링 후 제출

          장점 : 무페이임에도 불구하고 적당한 수준의 음박보정이 가능합니다.
          단점 : EQ를 사용하지 않습니다.
        </p>
      `,
      "소페이": `
        <h2>소페이 실력본 안내(전문)</h2>

        <h3>화음가이드 (원곡 화음 따기)</h3>
        <p>
          1. 노래를 들으면서 가사지에 화음이 들어가는 위치와 개수를 간략히 기록합니다.
          2. Vox Factory라는 AI 보컬 신디사이저를 사용하여 MIDI를 찍으며 먼저 화음이 위치한 멜로디를 체크합니다.
          (코러스 파트는 메인과 구분하여 별도로 MIDI 제작)
          3. 노래를 다시 들으면서 음을 직접 들으며 높낮이를 변경해서 화음을 제작합니다.
          4. WAV 파일로 출력 후 제출

          장점 : AI 보컬로 작업하기 때문에 음과 박자가 정확하고 듣기에 깔끔합니다.
          단점 : AI 보컬이라 발음이 어눌한 부분이 있고, 프로그램 기술력의 한계로 원곡과 유사한 기교를 구사하기 어렵습니다.
          (이 부분은 프로그램 업데이트에 따라 개선될 여지 있음)
        </p>

        <h3>화음가이드 (창작 화음)</h3>
        <p>
          1. 노래를 들으면서 가사지에 화음이 들어가는 위치와 개수를 간략히 구상하며 기록합니다.
          - 화음의 위치는 기본으로 세세히 지정해주세요! 
          오마카세 시 추가금이 발생합니다. (+20%)
          2. Vox Factory라는 AI 보컬 신디사이저를 사용하여 MIDI를 찍으며 먼저 화음이 위치할 멜로디를 체크합니다.
          (코러스 파트는 메인과 구분하여 별도로 MIDI 제작)
          3. 멜로디와 함께 동시에 들으면서 조화를 맞추어 높낮이를 변경해서 화음을 제작합니다.
          4.  WAV 파일로 출력 후 제출

          장점 : AI 보컬로 작업하기 때문에 음과 박자가 정확하고 듣기에 깔끔합니다.
          저는 합창단 경험과 성악 입시 준비 경험으로 7년간 화음을 접해왔습니다. 그렇기에 화음을 넣는 센스에 대해 자신이 있습니다.
          단점 : AI 보컬이라 발음이 어눌한 부분이 있고, 프로그램 기술력의 한계로 원곡과 유사한 기교를 구사하기 어렵습니다.
          (이 부분은 프로그램 업데이트에 따라 개선될 여지 있음)
          저는 화성악을 전문적으로 공부한 적이 없습니다. 그리고 화음을 감각과 경험으로 작업할 예정입니다. 
          따라서 전문적이고 이론 기반의 정교한 작업물을 기대하신다면 만족감을 드리기 어려울 수 있습니다. 
        </p>

        <h3>믹싱</h3>
        <p>
          0. Cakewalk Sonar을 이용하여 작업
          1. 원곡의 오디오 파형과 보컬의 오디오 파형을 체크하며 위치를 조정하여 먼저 박자를 맞춥니다.
          2. 음정 보정
          - 본 커미션의 음정 보정에는 두 가지 방향이 있는데, 첫 번째는 graillon2라는 오토튠 계열 플러그인이고 두 번째는 멜로다인입니다.
          graillon2를 사용하면 약간의 오차가 있을 수 있고 기계음이 필연적으로 들릴 가능성이 있습니다.
          멜로다인을 사용하면 두 개의 발음이 하나의 음으로 묶여 있는 사례를 제외하고는 거의 완벽하게 음정 보정이 가능합니다.
          3. 박자 보정 (멜로다인을 사용하여 세세하게 조정합니다.)
          4. 오디오 이펙트 사용
          5. WAV 파일로 렌더링 후 제출

          장점 : 음정·박자 보정이 충분히 적용됩니다.
          단점 : 음박 보정이 처음부터 완벽하게 완성되지 않을 수 있습니다, 그래서 더 완벽한 작업물에 욕심이 있다면 꼭 피드백을 요청해주세요!
          EQ는 필수로 들어가야 하는 상황이 아니라면 사용하지 않습니다.
        </p>

        <h3>일러스트</h3>
        <p>
          0. Krita를 이용하여 작업
          0-1. 먼저 구도와 의상 준비가 필요하며, 신청자 분께서 준비해주셔야 합니다. 오마카세를 원할 시 추가금이 발생합니다. (+30%)
          1. 구도를 바탕으로 러프를 작업합니다. (인체 비율/의상 간략) 
          2. 선화를 그립니다. 
          3. 밑색을 깝니다. 
          4. 채색을 진행합니다.
          - 채색은 그림자와 빛만 표현되며, 옷의 질감이나 머리칼의 세밀한 요소는 들어가지 않습니다.
          5. 완성 후 대화를 통해 가벼운 보정이 들어갈 수 있고, 투명 PNG로 제출합니다.

          장점 : 그림체가 다양하고(채색 제외) 분위기에 맞춰 변경이 가능하며, 정돈되고 반짝이는 인상을 줄 수 있습니다.
          3인 이상 단체그림 시 10% 할인!
          단점 : 러프 또는 특별한 재질 분위기에 약하고, 채색 분위기 다양성이 제한되며,
          소페이는 세밀한 묘사가 들어가지 않아 디테일이 필요한 작업엔 부적합할 수 있습니다.
          또한 그림체가 개인적으로 정리되어 있지 않아 추후 동일 그림체 재현 요청을 만족시키기 어려울 수 있습니다.
        </p>
      `,
      "유페이": `
        <h2>유페이 실력본 안내(전문)</h2>

        <h3>화음가이드 (원곡 화음 따기)</h3>
        <p>
          1. 노래를 들으면서 가사지에 화음이 들어가는 위치와 개수를 간략히 기록합니다.
          2. Vox Factory라는 AI 보컬 신디사이저를 사용하여 MIDI를 찍으며 먼저 화음이 위치한 멜로디를 체크합니다.
          (코러스 파트는 메인과 구분하여 별도로 MIDI 제작)
          3. 노래를 다시 들으면서 음을 직접 들으며 높낮이를 변경해서 화음을 제작합니다.
          4. WAV 파일로 출력 후 제출

          장점 : AI 보컬로 작업하기 때문에 음과 박자가 정확하고 듣기에 깔끔합니다.
          단점 : AI 보컬이라 발음이 어눌한 부분이 있고, 프로그램 기술력의 한계로 원곡과 유사한 기교를 구사하기 어렵습니다.
          (이 부분은 프로그램 업데이트에 따라 개선될 여지 있음)
        </p>

        <h3>화음가이드 (창작 화음)</h3>
        <p>
          1. 노래를 들으면서 가사지에 화음이 들어가는 위치와 개수를 간략히 구상하며 기록합니다.
          - 화음의 위치는 기본으로 세세히 지정해주셔도 좋고, 오마카세로 맡기셔도 좋습니다. 추가금은 발생하지 않습니다!
          2. Vox Factory라는 AI 보컬 신디사이저를 사용하여 MIDI를 찍으며 먼저 화음이 위치할 멜로디를 체크합니다.
          (코러스 파트는 메인과 구분하여 별도로 MIDI 제작)
          3. 멜로디와 함께 동시에 들으면서 조화를 맞추어 높낮이를 변경해서 화음을 제작합니다.
          4.  WAV 파일로 출력 후 제출

          장점 : AI 보컬로 작업하기 때문에 음과 박자가 정확하고 듣기에 깔끔합니다.
          저는 합창단 경험과 성악 입시 준비 경험으로 7년간 화음을 접해왔습니다. 그렇기에 화음을 넣는 센스에 대해 자신이 있습니다.
          단점 : AI 보컬이라 발음이 어눌한 부분이 있고, 프로그램 기술력의 한계로 원곡과 유사한 기교를 구사하기 어렵습니다.
          (이 부분은 프로그램 업데이트에 따라 개선될 여지 있음)
          저는 화성악을 전문적으로 공부한 적이 없습니다. 그리고 화음을 감각과 경험으로 작업할 예정입니다. 
          따라서 전문적이고 이론 기반의 정교한 작업물을 기대하신다면 만족감을 드리기 어려울 수 있습니다. 
        </p>

        <h3>믹싱</h3>
        <p>
          0. Cakewalk Sonar을 이용하여 작업
          1. 원곡의 오디오 파형과 보컬의 오디오 파형을 체크하며 위치를 조정하여 먼저 박자를 맞춥니다.
          2. 음정 보정
          - 본 커미션의 음정 보정에는 두 가지 방향이 있는데, 첫 번째는 graillon2라는 오토튠 계열 플러그인이고 두 번째는 멜로다인입니다.
          graillon2를 사용하면 약간의 오차가 있을 수 있고 기계음이 필연적으로 들릴 가능성이 있습니다.
          멜로다인을 사용하면 두 개의 발음이 하나의 음으로 묶여 있는 사례를 제외하고는 거의 완벽하게 음정 보정이 가능합니다.
          3. 박자 보정 (멜로다인을 사용하여 세세하게 조정합니다.)
          4. EQ를 사용하여 노래 분위기와 밸런스에 맞게 조정합니다.
          5. 오디오 이펙트 사용
          6. WAV 파일로 렌더링 후 제출

          장점 : 음정·박자 보정이 충분히 적용됩니다.
          단점 : 음박 보정이 처음부터 완벽하게 완성되지 않을 수 있습니다, 그래서 더 완벽한 작업물에 욕심이 있다면 꼭 피드백을 요청해주세요!
          또한 EQ를 이론으로 공부하지 않았고 오로지 귀로 들으며 작업하기 때문에 절대 완벽하게 작업되지 않습니다.
          EQ에 예민하거나 수준 높은 EQ가 필요하다면 유페이 믹싱은 추천하지 않습니다.
        </p>

        <h3>일러스트</h3>
        <p>
          0. Krita를 이용하여 작업
          0-1. 먼저 구도와 의상 준비가 필요하며, 신청자 분께서 준비해주셔야 합니다. 오마카세를 원할 시 추가금이 발생합니다. (+30%)
          1. 구도를 바탕으로 러프를 작업합니다. (인체 비율/의상 간략) 
          - 사전에 반무테 요청 시 반무테를 위해 선화 레이어를 미리 분리하여 작업하게 됩니다. 무테는 작업이 불가합니다.)
          2. 선화를 그립니다. 
          3. 밑색을 깝니다. 
          4. 채색을 진행합니다.
          - 유페이는 소페이와 달리 옷의 질감과 머리칼의 세밀한 묘사가 들어가며, 그림자/빛/반사광이 더 세밀하게 표현됩니다.
          5. 완성 후 대화를 통해 가벼운 보정이 들어갈 수 있고, 투명 PNG로 제출합니다.

          장점 : 그림체가 다양하고 분위기에 맞춰 변경이 가능하며, 정돈되고 반짝이는 인상을 줄 수 있고, 소페이 대비 세밀한 묘사로 상승된 퀄리티의 작업물을 전달할 수 있습니다.
          3인 이상 단체그림 시 10% 할인!
          단점 : 러프 또는 특별한 재질 분위기에 약하고, 채색은 레퍼런스를 참고해 노력하지만 기본적으로 화려한 채색을 한 경험이 없어 화려한 일러를 원하시는 경우 만족시켜드리기 어렵습니다.
          또한 그림체가 개인적으로 정리되어 있지 않아 추후 동일 그림체 재현 요청을 만족시키기 어려울 수 있습니다.
        </p>
      `
    };

    // ====== 4) 실력본 링크(페이별) ======
    // TODO: 여기에 다인이 준비해둔 페이별 실력본 드라이브 링크 넣기
    const sampleLinks = {
      "무페이": "https://drive.google.com/drive/folders/1AbxyHzaC6eIBM-QRkzbpJorSkRDOnl1i?usp=sharing",
      "소페이": "https://drive.google.com/drive/folders/15aRzrODwVvAKbxC8ZiwCJu9eESIgpqcc?usp=sharing",
      "유페이": "https://drive.google.com/drive/folders/1jcQnbHWc-YjpbXMOnf72pRbngERk9as2?usp=sharing"
    };

    // ====== 5) 신청 링크(구글폼 프리필) ======
    // TODO: 아래는 예시. 나중에 구글폼 프리필 링크 만들면 그걸로 교체하면 됨.
    function buildApplyUrl(a) {
        const base = "https://docs.google.com/forms/d/e/1FAIpQLSc2nJkLsYjGYjo4h0lGVFuy2PsSSay91tChQeTtSYWs4mxN5g/viewform";

        const params = new URLSearchParams({
            "usp": "pp_url",
            "entry.34729982": a.pay,          // 페이 타입
            "entry.363433341": a.usage,       // 사용 용도
            "entry.1381541102": a.comm,       // 커뮤니케이션
            "entry.1713311241": a.portfolio,  // 포폴 사용 여부
            "entry.1661009037": a.viewMode    // 안내 방식
        });

        return base + "?" + params.toString();
    }


    // ====== 렌더링 ======
    const samples = document.getElementById("samples");
    const apply = document.getElementById("apply");

    // 안내 방식에 따라 본문 선택
    if (answers.viewMode === "요약만 보기") {
      content.innerHTML = getSummaryText(answers.pay) + commonRules;
    } else if (answers.viewMode === "자세한 안내 + 실력본 보기") {
      content.innerHTML = FULL_GUIDE[answers.pay] + commonRules;
    } else {
      // 바로 실력본 보기
      content.innerHTML = `
        <h2>바로 실력본 보기</h2>
        <p>선택하신 페이 타입 기준으로 실력본만 확인합니다.</p>
      ` + commonRules;
    }

    // 실력본 섹션(요약/전문/실력본만 모두 아래에 링크는 보여주자)
    samples.innerHTML = `
      <h2>실력본</h2>
      <p>현재 선택( <b>${answers.pay}</b> ) 기준 실력본 링크입니다.</p>
      <p><a href="${sampleLinks[answers.pay]}" target="_blank" rel="noopener">실력본 열기</a></p>
    `;

    // 신청 섹션
    const applyUrl = buildApplyUrl(answers);
    apply.innerHTML = `
      <h2>신청</h2>
      <p><b>위 안내, 가격, 일정, 규칙을 모두 이해한 상태로 신청합니다.</b></p>
      <button onclick="location.href='${applyUrl}'">신청하기</button>
      <p style="margin-top:8px;">
        신청 시, 선택하신 답변(페이/용도/소통/포폴/안내방식)이 함께 전달되도록 구성됩니다.
      </p>
    `;
  </script>
</body>
</html>
